language: c

sudo: false

cache:
  directories:
    - $HOME/qemu
    - $HOME/toolchains

matrix:
  include:
  - os: linux
    compiler: gcc
  - os: linux
    compiler: clang
  - os: osx
    compiler: gcc
  - os: osx
    compiler: clang
  - os: linux
    env:
      CROSS_COMPILE=1
      TOOLCHAIN_NAME=gcc-linaro-7.2.1-2017.11-x86_64_arm-linux-gnueabihf
      TARGET=arm-linux-gnueabihf
      QEMU_ARCHES=arm
      QEMU_ARCH=arm
  - os: linux
    env:
      CROSS_COMPILE=1
      TOOLCHAIN_NAME=gcc-linaro-7.2.1-2017.11-x86_64_aarch64-linux-gnu
      TARGET=aarch64-linux-gnu
      QEMU_ARCHES=aarch64
      QEMU_ARCH=aarch64

script:
  - cmake --version
  - bash -e -x ./scripts/run_integration.sh
